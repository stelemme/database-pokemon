const fs = require('fs');
const csv = `2021-09-28 13:04:49.4890, 2021-09-28, 13:04:49, 1, 1
2021-09-28 13:04:49.6710, 2021-09-28, 13:04:49, 2, 1
2021-09-28 13:04:49.8870, 2021-09-28, 13:04:49, 3, 1
2021-09-28 13:04:50.3550, 2021-09-28, 13:04:50, 4, 1
2021-09-28 13:18:03.4890, 2021-09-28, 13:18:03, 5, 1
2021-09-28 13:18:03.6720, 2021-09-28, 13:18:03, 6, 1
2021-09-28 13:18:03.9230, 2021-09-28, 13:18:03, 7, 1
2021-09-28 13:18:04.3550, 2021-09-28, 13:18:04, 8, 1
2021-09-29 15:01:33.4600, 2021-09-29, 15:01:33, 9, 1
2021-09-29 15:01:33.6570, 2021-09-29, 15:01:33, 10, 1
2021-09-29 15:01:33.8730, 2021-09-29, 15:01:33, 11, 1
2021-09-29 15:01:34.2240, 2021-09-29, 15:01:34, 12, 1
2021-09-29 15:03:27.7430, 2021-09-29, 15:03:27, 13, 1
2021-09-29 15:03:27.9240, 2021-09-29, 15:03:27, 14, 1
2021-09-29 15:03:28.1060, 2021-09-29, 15:03:28, 15, 1
2021-09-29 15:03:28.5060, 2021-09-29, 15:03:28, 16, 1
2021-09-29 15:16:25.2770, 2021-09-29, 15:16:25, 17, 1
2021-09-29 15:16:25.5240, 2021-09-29, 15:16:25, 18, 1
2021-09-29 15:16:25.7730, 2021-09-29, 15:16:25, 19, 1
2021-09-29 15:16:26.1560, 2021-09-29, 15:16:26, 20, 1
2021-09-29 16:01:26.1280, 2021-09-29, 16:01:26, 21, 1
2021-09-29 16:01:26.3450, 2021-09-29, 16:01:26, 22, 1
2021-09-29 16:01:26.5780, 2021-09-29, 16:01:26, 23, 1
2021-09-29 16:01:26.8440, 2021-09-29, 16:01:26, 24, 1
2021-09-29 16:09:50.2810, 2021-09-29, 16:09:50, 25, 1
2021-09-29 16:09:50.4800, 2021-09-29, 16:09:50, 26, 1
2021-09-29 16:09:50.6980, 2021-09-29, 16:09:50, 27, 1
2021-09-29 16:09:50.9900, 2021-09-29, 16:09:50, 28, 1
2021-09-29 16:21:19.1280, 2021-09-29, 16:21:19, 29, 1
2021-09-29 16:21:19.3100, 2021-09-29, 16:21:19, 30, 1
2021-09-29 16:21:19.4930, 2021-09-29, 16:21:19, 31, 1
2021-09-29 16:21:19.7300, 2021-09-29, 16:21:19, 32, 1
2021-09-29 16:35:19.7930, 2021-09-29, 16:35:19, 33, 1
2021-09-29 16:35:20.0270, 2021-09-29, 16:35:20, 34, 1
2021-09-29 16:35:20.2440, 2021-09-29, 16:35:20, 35, 1
2021-09-29 16:35:20.5260, 2021-09-29, 16:35:20, 36, 1
2021-09-29 16:47:48.7810, 2021-09-29, 16:47:48, 37, 1
2021-09-29 16:47:48.9410, 2021-09-29, 16:47:48, 38, 1
2021-09-29 16:47:49.1100, 2021-09-29, 16:47:49, 39, 1
2021-09-29 16:47:49.2740, 2021-09-29, 16:47:49, 40, 1
2021-09-29 17:22:52.7730, 2021-09-29, 17:22:52, 41, 1
2021-09-29 17:22:53.0060, 2021-09-29, 17:22:53, 42, 1
2021-09-29 17:22:53.4410, 2021-09-29, 17:22:53, 43, 1
2021-09-29 17:22:53.6740, 2021-09-29, 17:22:53, 44, 1
2021-09-29 17:35:49.8810, 2021-09-29, 17:35:49, 45, 1
2021-09-29 17:35:50.0310, 2021-09-29, 17:35:50, 46, 1
2021-09-29 17:35:50.5000, 2021-09-29, 17:35:50, 47, 1
2021-09-29 17:35:50.9670, 2021-09-29, 17:35:50, 48, 1
2021-09-29 17:38:37.0950, 2021-09-29, 17:38:37, 49, 1
2021-09-29 17:38:37.2780, 2021-09-29, 17:38:37, 50, 1
2021-09-29 17:38:37.4730, 2021-09-29, 17:38:37, 51, 1
2021-09-29 17:38:37.6440, 2021-09-29, 17:38:37, 52, 1
2021-09-29 17:47:55.2630, 2021-09-29, 17:47:55, 53, 1
2021-09-29 17:47:55.4620, 2021-09-29, 17:47:55, 54, 1
2021-09-29 17:47:55.6610, 2021-09-29, 17:47:55, 55, 1
2021-09-29 17:47:56.1970, 2021-09-29, 17:47:56, 56, 1
2021-09-29 18:02:27.3850, 2021-09-29, 18:02:27, 57, 1
2021-09-29 18:02:27.5080, 2021-09-29, 18:02:27, 58, 1
2021-09-29 18:02:27.6740, 2021-09-29, 18:02:27, 59, 1
2021-09-29 18:02:28.1740, 2021-09-29, 18:02:28, 60, 1
2021-09-29 19:49:48.1370, 2021-09-29, 19:49:48, 61, 1
2021-09-29 19:49:48.2800, 2021-09-29, 19:49:48, 62, 1
2021-09-29 19:49:48.6290, 2021-09-29, 19:49:48, 63, 1
2021-10-04 18:45:13.9920, 2021-10-04, 18:45:13, 64, 1
2021-10-04 18:45:14.2570, 2021-10-04, 18:45:14, 65, 1
2021-10-04 18:45:14.5240, 2021-10-04, 18:45:14, 66, 1
2021-10-04 18:45:14.8240, 2021-10-04, 18:45:14, 67, 1
2021-10-04 18:57:29.3890, 2021-10-04, 18:57:29, 68, 1
2021-10-04 18:57:29.6220, 2021-10-04, 18:57:29, 69, 1
2021-10-04 18:57:29.8900, 2021-10-04, 18:57:29, 70, 1
2021-10-04 18:57:30.2400, 2021-10-04, 18:57:30, 71, 1`;

// Split the CSV data into rows
const rows = csv.split('\n');

// Transform the CSV rows into an array of ISO date strings
const isoDates = rows.map(row => {
  const parts = row.split(',');
  const datePart = parts[0].trim();
  return new Date(datePart).toISOString();
});

// Define the output folder and file path
const outputFolder = './_output';
const jsonFilePath = `${outputFolder}/output.json`;

// Ensure the output folder exists
if (!fs.existsSync(outputFolder)) {
  fs.mkdirSync(outputFolder);
}

// Write the ISO date array to a JSON file
fs.writeFileSync(jsonFilePath, JSON.stringify(isoDates, null, 2));

console.log(`Data saved to ${jsonFilePath}`);